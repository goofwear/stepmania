<ActorFrame> <children>
	<Layer
		Type="BitmapText"
		Font="Common normal"

		InitCommand="x,SCREEN_CENTER_X-160;y,SCREEN_CENTER_Y+94;playcommand,Set"
		OnCommand="zoom,0.5;shadowlength,2;diffusealpha,0;linear,0.5;diffusealpha,1"
		OffCommand="linear,0.5;diffusealpha,0"

		SetCommand="%function(self)
			local sText = GAMESTATE:GetSongOptionsString()
			sText = string.gsub(sText, ', ', '\n')
			self:settext( sText )
			if GAMESTATE:IsExtraStage() or GAMESTATE:IsExtraStage2() then
				self:diffuseblink()
			end
		end"
		SongOptionsChangedMessageCommand="playcommand,Set"
	/>
	<Layer
		Type="OptionIconRow"
		Condition="GAMESTATE:IsHumanPlayer(PLAYER_1)"
		InitCommand="x,SCREEN_CENTER_X-300;y,SCREEN_CENTER_Y-182;set,PLAYER_1"
		OnCommand="zoomy,0;linear,0.5;zoomy,1"
		OffCommand="linear,0.5;zoomy,0"
		PlayerOptionsChangedP1MessageCommand="set,PLAYER_1"
	/>

	<Layer
		Type="OptionIconRow"
		Condition="GAMESTATE:IsHumanPlayer(PLAYER_2)"
		InitCommand="x,SCREEN_CENTER_X-300;y,SCREEN_CENTER_Y-156;set,PLAYER_2"
		OnCommand="zoomy,0;linear,0.5;zoomy,1"
		OffCommand="linear,0.5;zoomy,0"
		PlayerOptionsChangedP2MessageCommand="set,PLAYER_2"
	/>
	<Layer
		Type="MusicSortDisplay"
		Condition="not GAMESTATE:IsCourseMode()"
		InitCommand="x,SCREEN_CENTER_X-65-SCREEN_WIDTH*0.6;y,SCREEN_CENTER_Y-119"
		OnCommand="bounceend,0.5;addx,SCREEN_WIDTH*0.6"
		OffCommand="bouncebegin,0.5;addx,-SCREEN_WIDTH*0.6"
	/>
	<!-- Do the fade out here, because we want the options message to
	     appear over it. -->
	<Layer
		Type="Quad"
		InitCommand="stretchto,SCREEN_LEFT,SCREEN_TOP,SCREEN_RIGHT,SCREEN_BOTTOM;diffuse,#000000"
		OnCommand="diffusealpha,0"
		OffCommand="linear,0.3;diffusealpha,1"
	/>

	<Layer
		File="@THEME:GetPathG(P.LoadingScreen,'options message 1x2')"
		InitCommand="x,SCREEN_CENTER_X;y,SCREEN_CENTER_Y;pause"
		OnCommand="hidden,1"
		ShowPressStartForOptionsCommand="hidden,0;setstate,0;
			faderight,.3;fadeleft,.3;cropleft,-0.3;cropright,1.3;linear,0.4;cropright,-0.3"
		ShowEnteringOptionsCommand="finishtweening;setstate,1;sleep,0.25;playcommand,HidePressStartForOptions"
		HidePressStartForOptionsCommand="linear,0.4;cropleft,1.3"
	/>
</children> </ActorFrame>
